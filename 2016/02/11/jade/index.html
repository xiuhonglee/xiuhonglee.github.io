<!DOCTYPE html><html lang="zh-Hans"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="description" content="随便写写~"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Jade模板引擎 · xiuhong</title><link rel="short icon" href="/favicon.ico"><!-- font--><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Source+Sans+Pro:400,600|Roboto Mono"><!-- icon--><link rel="stylesheet" href="/fonts/iconfont/iconfont.css"><!-- theme style--><link rel="stylesheet" href="/css/style.css"><!-- baidu analytics--><script type="text/javascript">var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?9e0cbea7d3319c6c94c71dfb93c151b8";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><!-- google analytics--><script type="text/javascript">(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-74273646-1', 'auto');
ga('send', 'pageview');</script></head><body><div id="main"><header><a href="/." class="logo">xiuhong</a><ul class="nav"><li class="nav-link"><a href="/" target="_self">Home</a></li><li class="nav-link"><a href="/archives/" target="_self">Archives</a></li><li class="nav-link"><a href="/categories/" target="_self">Categories</a></li><li class="nav-link"><a href="/tags/" target="_self">Tags</a></li><li class="nav-link"><a href="/about/" target="_self">About</a></li></ul></header><section id="container"><article class="post"><h1 class="post-title">Jade模板引擎</h1><span class="post-time">Feb 11, 2016</span><div id="sidebar" class="post-sidebar"><h3 class="heading">Directory</h3><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#u5E38_u7528_u547D_u4EE4"><span class="toc-text">常用命令</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#u5B89_u88C5"><span class="toc-text">安装</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#u7F16_u8BD1jade_u6587_u4EF6"><span class="toc-text">编译jade文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#u5B9E_u65F6_u7F16_u8BD1"><span class="toc-text">实时编译</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#u5E38_u7528_u8BED_u6CD5"><span class="toc-text">常用语法</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#u5C5E_u6027_uFF08Attributes_uFF09"><span class="toc-text">属性（Attributes）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#u6761_u4EF6_u5224_u65AD_uFF08case_uFF09"><span class="toc-text">条件判断（case）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#u52A0_u6CE8_u91CA"><span class="toc-text">加注释</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#u6761_u4EF6_u5224_u65AD_uFF08if-else_uFF09"><span class="toc-text">条件判断（if-else）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#u7EE7_u627F_28extends_29"><span class="toc-text">继承(extends)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#u8FC7_u6EE4_u5668"><span class="toc-text">过滤器</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#u5F15_u7528_uFF08includes_uFF09"><span class="toc-text">引用（includes）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#u8FED_u4EE3_uFF08Iteration_uFF09"><span class="toc-text">迭代（Iteration）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Mixins"><span class="toc-text">Mixins</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#u6DF7_u5408_u7684_u6587_u672C_u548C_u6807_u7B7E"><span class="toc-text">混合的文本和标签</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#jade_API"><span class="toc-text">jade API</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#jade-compile"><span class="toc-text">jade.compile</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#jade-compileFile"><span class="toc-text">jade.compileFile</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#jade-render"><span class="toc-text">jade.render</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#jade-renderFile"><span class="toc-text">jade.renderFile</span></a></li></ol></li></ol></div><div class="post-content"><p><img src="/uploads/jade.jpeg" alt="jade logo"></p>
<blockquote>
<p>因为学习Node，用到了Jade模板引擎，花点时间整理了下；Node Template Engine，当然使用也不限于Node。类似的模板引擎还有doT/smarty/FreeMarker，都是为了节省代码量，数据和html融合在一起，还说不出哪个好用；不过Jade靠代码缩进来区别标签层级容易报错，使用时小心。</p>
</blockquote>
<p><a href="http://jade-lang.com/command-line/" target="_blank" rel="external">官网：offcial</a></p>
<h4 id="u5E38_u7528_u547D_u4EE4"><a href="#u5E38_u7528_u547D_u4EE4" class="headerlink" title="常用命令"></a>常用命令</h4><h5 id="u5B89_u88C5"><a href="#u5B89_u88C5" class="headerlink" title="安装"></a>安装</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">sudo npm install jade -global</div></pre></td></tr></table></figure>
<h5 id="u7F16_u8BD1jade_u6587_u4EF6"><a href="#u7F16_u8BD1jade_u6587_u4EF6" class="headerlink" title="编译jade文件"></a>编译jade文件</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">jade index.jade </div><div class="line">jade -P index.jade (-P:格式化输出)</div></pre></td></tr></table></figure>
<h5 id="u5B9E_u65F6_u7F16_u8BD1"><a href="#u5B9E_u65F6_u7F16_u8BD1" class="headerlink" title="实时编译"></a>实时编译</h5><figure class="highlight sh"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">jade -P -w index.jade (-w:watch,实时监控文件输出)</div></pre></td></tr></table></figure>
<h4 id="u5E38_u7528_u8BED_u6CD5"><a href="#u5E38_u7528_u8BED_u6CD5" class="headerlink" title="常用语法"></a>常用语法</h4><p><a href="http://jade-lang.com/reference/" target="_blank" rel="external">官网：reference</a><br><a id="more"></a></p>
<h5 id="u5C5E_u6027_uFF08Attributes_uFF09"><a href="#u5C5E_u6027_uFF08Attributes_uFF09" class="headerlink" title="属性（Attributes）"></a>属性（Attributes）</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 常规 --&gt;</span></div><div class="line">a(class='button', href='google.com') Google</div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"google.com"</span> <span class="attr">class</span>=<span class="string">"button"</span>&gt;</span>Google<span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- 定义变量 --&gt;</span></div><div class="line">- var authenticated = true</div><div class="line">body(class=authenticated ? 'authed' : 'anon')</div><div class="line"><span class="tag">&lt;<span class="name">body</span> <span class="attr">class</span>=<span class="string">"authed"</span>&gt;</span><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- 转义 --&gt;</span></div><div class="line">div(escaped="<span class="tag">&lt;<span class="name">code</span>&gt;</span>")</div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">escaped</span>=<span class="string">"&amp;lt;code&amp;gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- 非转义:不推荐使用 --&gt;</span></div><div class="line">div(unescaped!="<span class="tag">&lt;<span class="name">code</span>&gt;</span>")</div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">unescaped</span>=<span class="string">"&lt;code&gt;"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- Boolean Attributes --&gt;</span></div><div class="line">input(type='checkbox', checked)</div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">checked</span>=<span class="string">"checked"</span>/&gt;</span></div><div class="line"></div><div class="line">input(type='checkbox', checked=true)</div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">checked</span>=<span class="string">"checked"</span>/&gt;</span></div><div class="line"></div><div class="line">input(type='checkbox', checked=false)</div><div class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span>/&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- Style Attributes --&gt;</span></div><div class="line">a(style=&#123;color: 'red', background: 'green'&#125;)</div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">style</span>=<span class="string">"color:red;background:green"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- Class Attributes --&gt;</span></div><div class="line">- var classes = ['foo', 'bar', 'baz']</div><div class="line">a(class=classes)</div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"foo bar baz"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"></div><div class="line">a.button</div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"button"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"></div><div class="line">.content</div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- ID Literal --&gt;</span></div><div class="line">a#main-link</div><div class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">id</span>=<span class="string">"main-link"</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></div><div class="line"></div><div class="line">#content</div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"content"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
<h5 id="u6761_u4EF6_u5224_u65AD_uFF08case_uFF09"><a href="#u6761_u4EF6_u5224_u65AD_uFF08case_uFF09" class="headerlink" title="条件判断（case）"></a>条件判断（case）</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">- var friends = 10</div><div class="line">case friends</div><div class="line">  when 0</div><div class="line">    p you have no friends</div><div class="line">  when 1</div><div class="line">    p you have a friend</div><div class="line">  default</div><div class="line">    p you have #&#123;friends&#125; friends</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>you have 10 friends<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div></pre></td></tr></table></figure>
<h5 id="u52A0_u6CE8_u91CA"><a href="#u52A0_u6CE8_u91CA" class="headerlink" title="加注释"></a>加注释</h5><figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">单行注释  =&gt;  '//', 会在代码中保留</div><div class="line">非缓冲注释 =&gt; '//- ' 注释文本不会在文本中保留</div><div class="line"></div><div class="line"><span class="comment">&lt;!-- 块注释 --&gt;</span></div><div class="line">body</div><div class="line">  //</div><div class="line">    As much text as you want</div><div class="line">    can go here.</div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">  <span class="comment">&lt;!--</span></div><div class="line">  As much text as you want</div><div class="line">  can go here.</div><div class="line">  --&gt;</div><div class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- Conditional Comments --&gt;</span></div><div class="line"><span class="comment">&lt;!--[if IE 8]&gt;</span></div><div class="line">&lt;html lang="en" class="lt-ie9"&gt;</div><div class="line">&lt;![endif]--&gt;</div><div class="line"><span class="comment">&lt;!--[if gt IE 8]&gt;&lt;!--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></div><div class="line"><span class="comment">&lt;!--&lt;![endif]--&gt;</span></div></pre></td></tr></table></figure>
<h5 id="u6761_u4EF6_u5224_u65AD_uFF08if-else_uFF09"><a href="#u6761_u4EF6_u5224_u65AD_uFF08if-else_uFF09" class="headerlink" title="条件判断（if-else）"></a>条件判断（if-else）</h5><ul>
<li><p>if-else</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">- var user = &#123; description: 'foo bar baz' &#125;</div><div class="line">- var authorised = false</div><div class="line">#user</div><div class="line">  if user.description</div><div class="line">    h2 Description</div><div class="line">    p.description= user.description</div><div class="line">  else if authorised</div><div class="line">    h2 Description</div><div class="line">    p.description.</div><div class="line">      User has no description,</div><div class="line">      why not add one...</div><div class="line">  else</div><div class="line">    h1 Description</div><div class="line">    p.description User has no description</div></pre></td></tr></table></figure>
</li>
<li><p>output</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">output:</div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"user"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>Description<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"description"</span>&gt;</span>foo bar baz<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>unless </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">unless user.isAnonymous</div><div class="line">  p You're logged in as #&#123;user.name&#125;</div><div class="line"></div><div class="line">等价于</div><div class="line"></div><div class="line">if !user.isAnonymous</div><div class="line">  p You're logged in as #&#123;user.name&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="u7EE7_u627F_28extends_29"><a href="#u7EE7_u627F_28extends_29" class="headerlink" title="继承(extends)"></a>继承(extends)</h5><ul>
<li><p>父文件（layout.jade）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//- layout.jade</span></div><div class="line">doctype html</div><div class="line">html</div><div class="line">  head</div><div class="line">    block title</div><div class="line">      title Default title</div><div class="line">  body</div><div class="line">    block content</div></pre></td></tr></table></figure>
</li>
<li><p>继承文件（index.jade）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//- index.jade</span></div><div class="line">extends ./layout.jade</div><div class="line"></div><div class="line">block title</div><div class="line">  title Article Title</div><div class="line"></div><div class="line">block content</div><div class="line">  h1 My Article</div></pre></td></tr></table></figure>
</li>
<li><p>结果输出</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">//- output</div><div class="line"></div><div class="line"><span class="meta">&lt;!doctype html&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Article Title<span class="tag">&lt;/<span class="name">title</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>My Article<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="u8FC7_u6EE4_u5668"><a href="#u8FC7_u6EE4_u5668" class="headerlink" title="过滤器"></a>过滤器</h5><ul>
<li><p>可以在jade模板中使用其他语法，如：coffee-script、babel、uglify-js、less、markdown</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">:markdown</div><div class="line">  # Markdown</div><div class="line">  I often like including markdown documents.</div><div class="line">script</div><div class="line">  :coffee-script</div><div class="line">    console.log 'This is coffee script'</div></pre></td></tr></table></figure>
</li>
<li><p>output</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Markdown<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">p</span>&gt;</span>I often like including markdown documents.<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"><span class="built_in">console</span>.log(<span class="string">'This is coffee script'</span>)</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="u5F15_u7528_uFF08includes_uFF09"><a href="#u5F15_u7528_uFF08includes_uFF09" class="headerlink" title="引用（includes）"></a>引用（includes）</h5><ul>
<li><p>jade文件之间相互引用</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//- index.jade</span></div><div class="line">doctype html</div><div class="line">html</div><div class="line">  include ./includes/head.jade</div><div class="line">  body</div><div class="line">    h1 My Site</div><div class="line">    p Welcome to my <span class="keyword">super</span> lame site.</div><div class="line">    include ./includes/foot.jade</div></pre></td></tr></table></figure>
</li>
<li><p>includes/head.jade</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function">head</span></div><div class="line">  title My Site</div><div class="line">  <span class="title">script</span><span class="params">(src=<span class="string">'/javascripts/jquery.js'</span>)</span></div><div class="line">  <span class="title">script</span><span class="params">(src=<span class="string">'/javascripts/app.js'</span>)</span></div></pre></td></tr></table></figure>
</li>
<li><p>includes/foot.jade</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#footer</div><div class="line">  p Copyright (c) foobar</div></pre></td></tr></table></figure>
</li>
</ul>
<blockquote>
<p>补充：类似可引入.css/.js文件 </p>
</blockquote>
<h5 id="u8FED_u4EE3_uFF08Iteration_uFF09"><a href="#u8FED_u4EE3_uFF08Iteration_uFF09" class="headerlink" title="迭代（Iteration）"></a>迭代（Iteration）</h5><ul>
<li><p>each</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">ul</div><div class="line">  each val in [1, 2, 3]</div><div class="line">    li= val</div><div class="line"></div><div class="line"><span class="comment">&lt;!-- output --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>each 迭代数组</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">ul</div><div class="line">  each val, index in ['zero', 'one', 'two']</div><div class="line">    li= index + ': ' + val</div><div class="line"></div><div class="line"><span class="comment">&lt;!-- output --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>0: zero<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>1: one<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>2: two<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>each 迭代对象</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">ul</div><div class="line">  each val, index in &#123;1:'one',2:'two',3:'three'&#125;</div><div class="line">    li= index + ': ' + val</div><div class="line"></div><div class="line"><span class="comment">&lt;!-- output --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>1: one<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>2: two<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>3: three<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>还可以容错处理（空值情况）</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">- var values = [];</div><div class="line">ul</div><div class="line">  each val in values.length ? values : ['There are no values']</div><div class="line">    li= val</div><div class="line"></div><div class="line"><span class="comment">&lt;!-- output --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>There are no values<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>while</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">- var n = 0;</div><div class="line">ul</div><div class="line">  while n &lt; 4</div><div class="line">    li= n++</div><div class="line">s</div><div class="line">&lt;!-- output --&gt;</div><div class="line">&lt;ul&gt;</div><div class="line">  &lt;li&gt;0&lt;/li&gt;</div><div class="line">  &lt;li&gt;1&lt;/li&gt;</div><div class="line">  &lt;li&gt;2&lt;/li&gt;</div><div class="line">  &lt;li&gt;3&lt;/li&gt;</div><div class="line">&lt;/ul&gt;</div></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="Mixins"><a href="#Mixins" class="headerlink" title="Mixins"></a>Mixins</h5><ul>
<li><p>Mixins 可用来定义可服用的代码块</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">//- Declaration</div><div class="line">mixin list</div><div class="line">  ul</div><div class="line">    li foo</div><div class="line">    li bar</div><div class="line">//- Use</div><div class="line">+list</div><div class="line">+list</div><div class="line"></div><div class="line"><span class="comment">&lt;!-- output --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>foo<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>bar<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>foo<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>bar<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>Mixins传递参数</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">mixin pet(name)</div><div class="line">  li.pet= name</div><div class="line">ul</div><div class="line">  +pet('cat')</div><div class="line">  +pet('dog')</div><div class="line">  +pet('pig')</div><div class="line"></div><div class="line"><span class="comment">&lt;!-- output --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ul</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"pet"</span>&gt;</span>cat<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"pet"</span>&gt;</span>dog<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span> <span class="attr">class</span>=<span class="string">"pet"</span>&gt;</span>pig<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>Mixins Blocks</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">mixin article(title)</div><div class="line">  .article</div><div class="line">    .article-wrapper</div><div class="line">      h1= title</div><div class="line">      if block</div><div class="line">        block</div><div class="line">      else</div><div class="line">        p No content provided</div><div class="line"></div><div class="line">+article('Hello world')</div><div class="line"></div><div class="line">+article('Hello world')</div><div class="line">  p This is my</div><div class="line">  p Amazing article</div><div class="line"></div><div class="line"><span class="comment">&lt;!-- output --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-wrapper"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello world<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>No content provided<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"article-wrapper"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello world<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>This is my<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">p</span>&gt;</span>Amazing article<span class="tag">&lt;/<span class="name">p</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
<li><p>Mixins Rest Arguments</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">mixin list(id, ...items)</div><div class="line">  ul(id=id)</div><div class="line">    each item in items</div><div class="line">      li= item</div><div class="line">+list('my-list', 1, 2, 3, 4)</div><div class="line"></div><div class="line"><span class="comment">&lt;!-- output --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"my-list"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>3<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>4<span class="tag">&lt;/<span class="name">li</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<h5 id="u6DF7_u5408_u7684_u6587_u672C_u548C_u6807_u7B7E"><a href="#u6DF7_u5408_u7684_u6587_u672C_u548C_u6807_u7B7E" class="headerlink" title="混合的文本和标签"></a>混合的文本和标签</h5><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">a 大段的文本会换行  </div><div class="line">方案一：竖线加空格，独立成一行</div><div class="line">    p </div><div class="line">        | 1.aa</div><div class="line">        | 2.bb</div><div class="line">        | 3.cc</div><div class="line"></div><div class="line">方案二：紧贴p加点</div><div class="line">    p. </div><div class="line">        1.aa</div><div class="line">        2.bb</div><div class="line">        3.cc</div><div class="line"></div><div class="line">b 标签文本混合在一起</div><div class="line">p. </div><div class="line">    1.aa&lt;strong&gt;22&lt;/strong&gt;</div><div class="line">    2.bb</div><div class="line">    &lt;span&gt;333&lt;/span&gt;</div><div class="line">    3.cc    </div><div class="line">    &lt;a href="#" /&gt;</div></pre></td></tr></table></figure>
<h4 id="jade_API"><a href="#jade_API" class="headerlink" title="jade API"></a>jade API</h4><p><a href="http://jade-lang.com/api/" target="_blank" rel="external">官网：official</a></p>
<h5 id="jade-compile"><a href="#jade-compile" class="headerlink" title="jade.compile"></a>jade.compile</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/***</span></div><div class="line">语法：jade.compile (source, options)</div><div class="line">params:</div><div class="line">    source &lt;string&gt;    源jade string</div><div class="line">    options &lt;options&gt;  常见pretty:true增强可读性</div><div class="line">    return &lt;function&gt;  该function接受变量渲染出html</div><div class="line">***/</div><div class="line"></div><div class="line"><span class="keyword">var</span> jade = <span class="built_in">require</span>(<span class="string">'jade'</span>);</div><div class="line"></div><div class="line"><span class="comment">// Compile a function</span></div><div class="line"><span class="keyword">var</span> fn = jade.compile(<span class="string">'div #&#123;course&#125;'</span>, options);</div><div class="line"></div><div class="line"><span class="comment">// Render the function</span></div><div class="line"><span class="keyword">var</span> html = fn(&#123;<span class="attr">course</span>: <span class="string">'local value'</span>&#125;);</div><div class="line"><span class="comment">// =&gt; '&lt;div&gt;local value&lt;/div&gt;'</span></div></pre></td></tr></table></figure>
<h5 id="jade-compileFile"><a href="#jade-compileFile" class="headerlink" title="jade.compileFile"></a>jade.compileFile</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/***</span></div><div class="line">    语法：jade.compileFile (path, options)</div><div class="line">    params 同上 </div><div class="line">***/</div><div class="line"></div><div class="line"><span class="keyword">var</span> jade = <span class="built_in">require</span>(<span class="string">'jade'</span>);</div><div class="line"></div><div class="line"><span class="comment">// Compile a function</span></div><div class="line"><span class="keyword">var</span> fn = jade.compileFile(<span class="string">'path to jade file'</span>, options);</div><div class="line"></div><div class="line"><span class="comment">// Render the function</span></div><div class="line"><span class="keyword">var</span> html = fn(locals);</div><div class="line"><span class="comment">// =&gt; '&lt;string&gt;of jade&lt;/string&gt;'</span></div></pre></td></tr></table></figure>
<h5 id="jade-render"><a href="#jade-render" class="headerlink" title="jade.render"></a>jade.render</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/***</span></div><div class="line">    语法：jade.render (source, options)</div><div class="line">    注：这里的options可传入变量locals </div><div class="line">***/</div><div class="line"><span class="keyword">var</span> jade = <span class="built_in">require</span>(<span class="string">'jade'</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> html = jade.render(<span class="string">'div #&#123;course&#125;'</span>, &#123;<span class="attr">course</span>: <span class="string">'jade render'</span>&#125;);</div><div class="line"><span class="comment">// =&gt; '&lt;div&gt;jade render&lt;/div&gt;'</span></div></pre></td></tr></table></figure>
<h5 id="jade-renderFile"><a href="#jade-renderFile" class="headerlink" title="jade.renderFile"></a>jade.renderFile</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/*** 语法：jade.renderFile (source, options) ***/</span></div><div class="line"><span class="keyword">var</span> jade = <span class="built_in">require</span>(<span class="string">'jade'</span>);</div><div class="line"><span class="keyword">var</span> html = jade.renderFile(<span class="string">'path/to/file.jade'</span>, options);</div></pre></td></tr></table></figure>
</div></article><div class="tags"><a href="/tags/模板引擎/">模板引擎</a></div><div class="paginator"><a href="/2016/02/11/2016-plan/" class="prev"><i class="iconfont icon-left"></i><span> Prev</span></a></div><section id="comments"><div id="disqus_thread"></div></section><script type="text/javascript">(function() {
var d = document, s = d.createElement('script');

s.src = '//ahonn.disqus.com/embed.js';

s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script></section><footer><div class="copyright"><p>&copy;2013-2017<span class="heart"><i class="iconfont icon-heart"></i></span><span class="author">修鸿</span></p><p class="theme">Theme by <a href="https://github.com/ahonn/hexo-theme-even"> Even</a></p></div><label id="back2top"><i class="iconfont icon-up"></i></label></footer></div></body><script src="/js/zepto.min.js"></script><script src="/js/theme.js"></script></html>