(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{409:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),a("p",[a("strong",[t._v("绘图上下文")]),t._v("包括：当前坐标系统变换信息("),a("code",[t._v("The current transformation matrix")]),t._v(")、当前剪辑区域("),a("code",[t._v("clipping oregion")]),t._v(")、绘图/画笔属性，如: 线条颜色("),a("code",[t._v("stroke")]),t._v(")、填充色("),a("code",[t._v("fillstyle")]),t._v(")、透明度("),a("code",[t._v("globalAlpha")]),t._v(")等，"),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/CanvasRenderingContext2D/save#The_drawing_state",target:"_blank",rel:"noopener noreferrer"}},[t._v("learn more"),a("OutboundLink")],1),t._v("；")]),t._m(1),t._m(2),a("Canvas-d08"),t._m(3),t._m(4),t._m(5),a("p",[t._v("绘制图形时，我们需要通过绘制路径来实现；路径又由不同的颜色和宽度的线条所组成。使用路径绘制需要如下步骤：")]),t._m(6),t._m(7),t._m(8),a("Canvas-d06"),t._m(9),t._m(10),t._m(11),a("Canvas-d07"),t._m(12),t._m(13),a("ul",[a("li",[a("a",{attrs:{href:"https://developer.mozilla.org/zh-CN/docs/Web/API/Canvas_API/Tutorial/Drawing_shapes",target:"_blank",rel:"noopener noreferrer"}},[t._v("MDN"),a("OutboundLink")],1)]),a("li",[a("a",{attrs:{href:"https://stackoverflow.com/questions/22432036/do-i-have-to-have-the-content-beginpath-and-content-closepath",target:"_blank",rel:"noopener noreferrer"}},[t._v("Do I have to have the content.beginPath() and content.closePath()?"),a("OutboundLink")],1)])])],1)},[function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_1-基本概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-基本概念","aria-hidden":"true"}},[this._v("#")]),this._v(" 1. 基本概念")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_2-暂存-恢复上下文"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-暂存-恢复上下文","aria-hidden":"true"}},[this._v("#")]),this._v(" 2. 暂存/恢复上下文")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("使用"),a("code",[t._v("Canvas")]),t._v("绘图过程中，有时候需要"),a("strong",[t._v("暂存")]),t._v("绘图上下文信息，此时可以用到"),a("code",[t._v("save")]),t._v("方法来暂存当前绘图状态("),a("strong",[t._v("入栈")]),t._v(")，使用"),a("code",[t._v("restore")]),t._v("方法来恢复之前暂存的绘图状态("),a("strong",[t._v("出栈")]),t._v(")。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("源码")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-javascript line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("strokeStyle "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"#ff0000"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("save")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 栈1 - 红色")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("strokeStyle "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"#0000ff"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" \n"),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("save")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 栈2 - 蓝色")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 左侧图形（略...）")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("restore")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 栈2 - 蓝色")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("stroke")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 右侧图形（略...）")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("restore")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 栈1 - 红色")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("this")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ctx"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("stroke")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])]),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_3-当前绘图路径"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-当前绘图路径","aria-hidden":"true"}},[this._v("#")]),this._v(" 3. 当前绘图路径")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("创建路径起始点")]),s("li",[this._v("使用画图命令画出路径")]),s("li",[this._v("把路径封闭")]),s("li",[this._v("通过描边和填充路径区域来渲染图形")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_3-2-closepath"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-closepath","aria-hidden":"true"}},[this._v("#")]),this._v(" 3.2 closePath")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[a("code",[t._v("canvas")]),t._v("上下文("),a("code",[t._v("context")]),t._v(")维护一个当前路径。我们可以通过"),a("strong",[t._v("画图命令")]),t._v("如：("),a("code",[t._v("moveTo")]),t._v("、"),a("code",[t._v("lineTo")]),t._v(")来描述路径，"),a("code",[t._v("closePath")]),t._v("同"),a("code",[t._v("moveTo")]),t._v("这些"),a("strong",[t._v("画图命令")]),t._v("属于同一类，它是用来"),a("strong",[t._v("告诉路径")]),t._v("是否需要闭合("),a("code",[t._v("closePath")]),t._v("只对"),a("code",[t._v("stroke")]),t._v("生效，对"),a("code",[t._v("fill")]),t._v("无效)。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"warning custom-block"},[s("p",{staticClass:"custom-block-title"},[this._v("WARNING")]),s("p",[this._v("注意观察，左侧线段ABC与右侧线段ABC粗线/颜色深度略有不同。这是因为左侧线段ABC画了两遍。下面的"),s("code",[this._v("beginPath")]),this._v("可以解决这个问题。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_3-1-beginpath"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-beginpath","aria-hidden":"true"}},[this._v("#")]),this._v(" 3.1 beginPath")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[a("code",[t._v("beginPath")]),t._v("用来创建一个当前路径("),a("code",[t._v("starts a new path by emptying the list of sub-paths")]),t._v(")，上例中没有使用"),a("code",[t._v("beginPath")]),t._v("的时候，左右两部分图形是在同一个路径中进行绘制的，每一次调用"),a("code",[t._v("stroke")]),t._v("时，都会将当前路径上的图形绘制到"),a("code",[t._v("canvas")]),t._v("上，所以左侧线段ABC看上去比右侧线段ABC要粗且颜色较深。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"tip custom-block"},[a("p",{staticClass:"custom-block-title"},[t._v("TIP")]),a("p",[t._v("为了便于理解，这里打个比方。当我们每次打算在画布("),a("code",[t._v("canvas")]),t._v(")上画图形时，都需要先在一张"),a("strong",[t._v("草稿纸")]),t._v("上进行，这张草稿纸可以看做"),a("strong",[t._v("当前路径")]),t._v("，我们通过设置好画笔颜色("),a("code",[t._v("strokeStyle")]),t._v(")、画笔粗细("),a("code",[t._v("lineWidth")]),t._v(")、图形路径("),a("code",[t._v("moveTo/lineTo")]),t._v(")等信息，最终通过"),a("code",[t._v("stroke/fill")]),t._v("将草稿纸上的内容绘制到"),a("code",[t._v("canvas")]),t._v("上。"),a("strong",[a("code",[t._v("beginPath")]),t._v("的作用在于丢弃之前的草稿纸且重新创建了一张草稿纸")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"参考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考","aria-hidden":"true"}},[this._v("#")]),this._v(" 参考")])}],!1,null,null,null);s.default=e.exports}}]);